<<<<<<< HEAD
name: Run Paranoia on Paranoia

on: workflow_dispatch
env:
  GITHUB_CONTEXT: ${{ toJSON(github) }}
jobs:
    paranoia-inception:
      runs-on: ubuntu-latest
      steps:
<<<<<<< HEAD
        - run: echo "$GITHUB_CONTEXT"


        - name: "Checkout code"
          uses: actions/checkout@v3

        - run: echo $(tree -a)
        - run: echo $(tree -a ./.github)
        - run: echo $(cat ${GITHUB_CONTEXT.workspace}/Dockerfile)

        - name: "Build container"
          id: "build-and-save"
          run: |
            docker build -t paranoia .
            docker save paranoia > tmp.tar
            BUILT_CONTAINER=$(cat tmp.tar) 

            echo "::set-output name=container_tar_content::file://${container_tar_content}"

        - name: "Run Paranoia container"
          uses: ./
          with:
            action: inspect
            target_tar: ${{steps.build-and-save.outputs.container_tar_content}}
